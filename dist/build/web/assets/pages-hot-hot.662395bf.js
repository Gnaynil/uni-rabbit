import{C as s,l as e,o as t,c as a,w as l,e as o,a as u,h as i,r,F as n,i as c,s as p,b as d,t as m,D as g,E as f,y as v,d as y,j as _,m as h}from"./index-af18ee11.js";import{o as b}from"./uni-app.es.6b8c51ac.js";import{h as I}from"./http.84d8a07a.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const j=(s,e)=>I({method:"GET",url:s,data:e}),S=w({__name:"hot",props:{type:{type:String,default:()=>{}}},setup(I){const w=I,S=[{type:"1",title:"特惠推荐",url:"/hot/preference"},{type:"2",title:"爆款推荐",url:"/hot/inVogue"},{type:"3",title:"一站买全",url:"/hot/oneStop"},{type:"4",title:"新鲜好物",url:"/hot/new"}].find((s=>s.type===w.type));s({title:S.title});const k=e(""),x=e([]),T=e(0);b((()=>(async()=>{const s=await j(S.url,{page:34,pageSize:10});k.value=s.result.bannerPicture,x.value=s.result.subTypes})()));return(s,e)=>{const b=c,I=o,w=y,z=_,C=h;return t(),a(I,{class:"viewport"},{default:l((()=>[u(I,{class:"cover"},{default:l((()=>[u(b,{src:k.value},null,8,["src"])])),_:1}),u(I,{class:"tabs"},{default:l((()=>[(t(!0),i(n,null,r(x.value,((s,e)=>(t(),a(w,{class:p(["text",{active:e===T.value}]),key:s.id,onClick:()=>T.value=e},{default:l((()=>[d(m(s.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),(t(!0),i(n,null,r(x.value,((s,o)=>g((t(),a(C,{"scroll-y":"",class:"scroll-view",key:s.id,onScrolltolower:e[0]||(e[0]=s=>(async()=>{const s=x.value[T.value];if(!(s.goodsItems.page<s.goodsItems.pages))return s.finish=!0,v({icon:"none",title:"没有更多数据了~"});s.goodsItems.page++;const e=(await j(S.url,{subType:s.id,page:s.goodsItems.page,pageSize:s.goodsItems.pageSize})).result.subTypes[T.value];s.goodsItems.items=s.goodsItems.items.concat(...e.goodsItems.items)})())},{default:l((()=>[u(I,{class:"goods"},{default:l((()=>[(t(!0),i(n,null,r(s.goodsItems.items,(s=>(t(),a(z,{"hover-class":"none",class:"navigator",key:s.id,url:`/pages/goods/goods?id=${s.id}`},{default:l((()=>[u(b,{class:"thumb",src:s.picture},null,8,["src"]),u(I,{class:"name ellipsis"},{default:l((()=>[d(m(s.name),1)])),_:2},1024),u(I,{class:"price"},{default:l((()=>[u(w,{class:"symbol"},{default:l((()=>[d("¥")])),_:1}),u(w,{class:"number"},{default:l((()=>[d(m(s.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024),u(I,{class:"loading-text"},{default:l((()=>[d(m(s.finish?"没有更多数据~":"正在加载..."),1)])),_:2},1024)])),_:2},1024)),[[f,o===T.value]]))),128))])),_:1})}}},[["__scopeId","data-v-9e7f17db"]]);export{S as default};
