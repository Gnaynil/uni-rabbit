import{g as e,l as t,a4 as a,o as s,c as l,w as r,h as d,F as o,r as u,a as i,b as n,t as c,H as _,q as f,f as p,y as m,d as y,e as v,i as S,j as x,m as k,k as g,S as b}from"./index-af18ee11.js";import{i as h}from"./order.18c49d40.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./http.84d8a07a.js";const C=j({__name:"OrderList",props:{orderState:Number},setup(g){const b=g,{safeAreaInsets:j}=e(),C=[{id:0,text:""},{id:1,text:"待付款"},{id:2,text:"待发货"},{id:3,text:"待收货"},{id:4,text:"待评价"},{id:5,text:"已完成"},{id:6,text:"已取消"}],I={page:1,pageSize:5,orderState:b.orderState},w=t([]);a((()=>{(async()=>{const e=await h(I);w.value=e.result.items,console.log(w.value)})()}));return(e,t)=>{const a=y,g=v,b=S,h=x,I=k;return s(),l(I,{"scroll-y":"",class:"orders"},{default:r((()=>{var e;return[w.value?(s(!0),d(o,{key:0},u(w.value,(e=>(s(),l(g,{class:"card",key:e.id},{default:r((()=>[i(g,{class:"status"},{default:r((()=>[i(a,{class:"date"},{default:r((()=>[n(c(e.createTime),1)])),_:2},1024),i(a,null,{default:r((()=>[n(c(C[e.orderState].text),1)])),_:2},1024),e.orderState>=C[4].id?(s(),l(a,{key:0,class:"icon-delete"})):_("",!0)])),_:2},1024),(s(!0),d(o,null,u(e.skus,(t=>(s(),l(h,{key:t.id,class:"goods",url:`/pagesOrder/detail/detail?id=${e.id}`,"hover-class":"none"},{default:r((()=>[i(g,{class:"cover"},{default:r((()=>[i(b,{mode:"aspectFit",src:t.image},null,8,["src"])])),_:2},1024),i(g,{class:"meta"},{default:r((()=>[i(g,{class:"name ellipsis"},{default:r((()=>[n(c(t.name),1)])),_:2},1024),i(g,{class:"type"},{default:r((()=>[n(c(t.attrsText),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128)),i(g,{class:"payment"},{default:r((()=>[i(a,{class:"quantity"},{default:r((()=>[n("共"+c(e.totalNum)+"件商品",1)])),_:2},1024),i(a,null,{default:r((()=>[n("实付")])),_:1}),i(a,{class:"amount"},{default:r((()=>[i(a,{class:"symbol"},{default:r((()=>[n("¥")])),_:1}),n(c(e.payMoney.toFixed(2)),1)])),_:2},1024)])),_:2},1024),i(g,{class:"action"},{default:r((()=>[e.orderState===C[1].id?(s(),l(g,{key:0,class:"button primary",onClick:t=>(async e=>{m({title:"支付成功"}),w.value.find((t=>t.id===e)).orderState=C[2].id})(e.id)},{default:r((()=>[n("去支付")])),_:2},1032,["onClick"])):(s(),d(o,{key:1},[i(h,{class:"button secondary",url:`/pagesOrder/create/create?orderId=${e.id}`,"hover-class":"none"},{default:r((()=>[n(" 再次购买 ")])),_:2},1032,["url"]),e.orderState===C[3].id?(s(),l(g,{key:0,class:"button primary"},{default:r((()=>[n("确认收货")])),_:1})):_("",!0)],64))])),_:2},1024)])),_:2},1024)))),128)):_("",!0),i(g,{class:"loading-text",style:f({paddingBottom:(null==(e=p(j))?void 0:e.bottom)+"px"})},{default:r((()=>[n(c("没有更多数据~"),1)])),_:1},8,["style"])]})),_:1})}}},[["__scopeId","data-v-98b8a7e8"]]),I=j({__name:"list",props:{type:String},setup(a){const _=a;e();const p=t([{orderState:0,title:"全部"},{orderState:1,title:"待付款"},{orderState:2,title:"待发货"},{orderState:3,title:"待收货"},{orderState:4,title:"待评价"}]),m=t(p.value.findIndex((e=>e.orderState===Number(_.type))));return(e,t)=>{const a=y,_=v,S=b,x=g;return s(),l(_,{class:"viewport"},{default:r((()=>[i(_,{class:"tabs"},{default:r((()=>[(s(!0),d(o,null,u(p.value,((e,t)=>(s(),l(a,{class:"item",onClick:()=>m.value=t,key:e.orderState},{default:r((()=>[n(c(e.title),1)])),_:2},1032,["onClick"])))),128)),i(_,{class:"cursor",style:f({left:20*m.value+"%"})},null,8,["style"])])),_:1}),i(x,{class:"swiper",current:m.value,onChange:t[0]||(t[0]=e=>m.value=e.detail.current)},{default:r((()=>[(s(!0),d(o,null,u(p.value,(e=>(s(),l(S,{key:e.title},{default:r((()=>[i(C,{orderState:e.orderState},null,8,["orderState"])])),_:2},1024)))),128))])),_:1},8,["current"])])),_:1})}}},[["__scopeId","data-v-229df161"]]);export{I as default};
