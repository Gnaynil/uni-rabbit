"use strict";const e=require("../../../common/vendor.js"),t=require("../../../services/order.js");require("../../../utils/http.js"),require("../../../stores/index.js"),require("../../../stores/modules/member.js");const r={__name:"OrderList",props:{orderState:Number},setup(r){const d=r,{safeAreaInsets:a}=e.index.getSystemInfoSync(),i=[{id:0,text:""},{id:1,text:"待付款"},{id:2,text:"待发货"},{id:3,text:"待收货"},{id:4,text:"待评价"},{id:5,text:"已完成"},{id:6,text:"已取消"}],o={page:1,pageSize:5,orderState:d.orderState},s=e.ref([]);e.onMounted((()=>{(async()=>{const e=await t.getMemberOrderAPI(o);s.value=e.result.items,console.log(s.value)})()}));return(r,d)=>{var o;return e.e({a:s.value},s.value?{b:e.f(s.value,((r,d,a)=>e.e({a:e.t(r.createTime),b:e.t(i[r.orderState].text),c:r.orderState>=i[4].id},(r.orderState,i[4].id,{}),{d:e.f(r.skus,((t,r,d)=>({a:t.image,b:e.t(t.name),c:e.t(t.attrsText),d:t.id}))),e:`/pagesOrder/detail/detail?id=${r.id}`,f:e.t(r.totalNum),g:e.t(r.payMoney.toFixed(2)),h:r.orderState===i[1].id},r.orderState===i[1].id?{i:e.o((d=>(async r=>{{const d=await t.getPayWxPayMiniPayAPI({orderId:r});e.wx$1.requestPayment(d.result)}e.index.showToast({title:"支付成功"}),s.value.find((e=>e.id===r)).orderState=i[2].id})(r.id)),r.id)}:e.e({j:`/pagesOrder/create/create?orderId=${r.id}`,k:r.orderState===i[3].id},(r.orderState,i[3].id,{})),{l:r.id})))}:{},{c:e.t("没有更多数据~"),d:(null==(o=e.unref(a))?void 0:o.bottom)+"px"})}}};wx.createComponent(r);
