{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup>\nimport { ref } from 'vue'\nimport CustomNavBar from './components/CustomNavBar.vue'\nimport CategoryPanel from './components/CategoryPanel.vue'\nimport HotPanel from './components/HotPanel.vue'\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotItemAPI } from '@/services/home.js'\nimport { useGuessList  } from '@/composables/index.js'\nimport { onLoad } from '@dcloudio/uni-app'\nimport PageSkeleton from './components/PageSkeleton.vue'\nconst Info= uni.getSystemInfoSync()\n//获取轮播图数据\nconst bannerList = ref([])\nconst getBannerData = async () => {\n  const res = await getHomeBannerAPI()\n  bannerList.value = res.result\n}\n\n//获取前台分类\nconst categoryList = ref([])\nconst getCategoryData = async () => {\n  const res = await getHomeCategoryAPI()\n  categoryList.value = res.result\n}\n\n//获取热门推荐\nconst hotList = ref([])\nconst getHotData = async () => {\n  const res = await getHomeHotItemAPI()\n  hotList.value = res.result\n}\n// 是否加载中标记\nconst isLoading = ref(false)\nonLoad(async () => {\n  isLoading.value = true\n  await Promise.all([getBannerData(), getCategoryData(), getHotData()])\n  isLoading.value = false\n})\n//滚动触底触发\nconst {guessRef,onScrolltolower} = useGuessList()\n// 当前下拉刷新状态\nconst isTriggered = ref(false)\n// 自定义下拉刷新被触发\nconst onRefresherrefresh = async () => {\n  // 开始动画\n  isTriggered.value = true\n  // 重置猜你喜欢组件数据\n  guessRef.value?.resetData()\n  await Promise.all([getBannerData(), getCategoryData(), getHotData(), guessRef.value?.getMore()])\n  // 关闭动画\n  isTriggered.value = false\n}\n</script>\n\n<template>\n  <CustomNavBar />\n  <scroll-view\n    refresher-enabled\n    @refresherrefresh=\"onRefresherrefresh\"\n    :refresher-triggered=\"isTriggered\"\n    @scrolltolower=\"onScrolltolower\"\n    scroll-y\n    enable-back-to-top\n    class=\"scroll-view\"\n  >\n    <PageSkeleton v-if=\"isLoading\" />\n    <template v-else>\n      <XtxSwiper :data=\"bannerList\" />\n      <CategoryPanel :categoryList=\"categoryList\" />\n      <HotPanel :hotList=\"hotList\" />\n      <!-- 绑定组件ref -->\n      <XtxGuess ref=\"guessRef\" class=\"guess\"/>\n    </template>\n  </scroll-view>\n</template>\n\n<style lang=\"scss\">\npage {\n  background-color: #f7f7f7;\n  height: 100%;\n  overflow: hidden;\n}\n\n.scroll-view {\n  flex: 1;\n  overflow: hidden;\n}\n.guess {\n  background-color: #f7f7f8;\n  margin-top: 20rpx;\n  padding-bottom: v-bind(\"88+Info.statusBarHeight+'px'\");\n}\n</style>\n","import MiniProgramPage from 'D:/code/uni-rabbit/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotItemAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;;;;;;;;AAEA,MAAM,eAAe,MAAW;AAChC,MAAM,gBAAgB,MAAW;AACjC,MAAM,WAAW,MAAW;AAI5B,MAAM,eAAe,MAAW;;;;;;;AAChC,UAAM,OAAMA,cAAG,MAAC,kBAAmB;AAEnC,UAAM,aAAaC,cAAG,IAAC,EAAE;AACzB,UAAM,gBAAgB,YAAY;AAChC,YAAM,MAAM,MAAMC,+BAAkB;AACpC,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAGA,UAAM,eAAeD,cAAG,IAAC,EAAE;AAC3B,UAAM,kBAAkB,YAAY;AAClC,YAAM,MAAM,MAAME,iCAAoB;AACtC,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AAGA,UAAM,UAAUF,cAAG,IAAC,EAAE;AACtB,UAAM,aAAa,YAAY;AAC7B,YAAM,MAAM,MAAMG,gCAAmB;AACrC,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,UAAM,YAAYH,cAAG,IAAC,KAAK;AAC3BI,kBAAAA,OAAO,YAAY;AACjB,gBAAU,QAAQ;AAClB,YAAM,QAAQ,IAAI,CAAC,cAAe,GAAE,gBAAiB,GAAE,WAAU,CAAE,CAAC;AACpE,gBAAU,QAAQ;AAAA,IACpB,CAAC;AAED,UAAM,EAAC,UAAS,gBAAe,IAAIC,+BAAc;AAEjD,UAAM,cAAcL,cAAG,IAAC,KAAK;AAE7B,UAAM,qBAAqB,YAAY;;AAErC,kBAAY,QAAQ;AAEpB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI,CAAC,cAAe,GAAE,gBAAe,GAAI,WAAU,IAAI,cAAS,UAAT,mBAAgB,SAAS,CAAC;AAE/F,kBAAY,QAAQ;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA,GAAG,WAAW,eAAe;"}