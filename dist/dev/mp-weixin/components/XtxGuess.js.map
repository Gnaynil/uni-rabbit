{"version":3,"file":"XtxGuess.js","sources":["../../../../src/components/XtxGuess.vue","../../../../uniComponent:/RDovY29kZS91bmktcmFiYml0L3NyYy9jb21wb25lbnRzL1h0eEd1ZXNzLnZ1ZQ"],"sourcesContent":["<script setup>\nimport { onLoad } from '@dcloudio/uni-app'\nimport { getHomeGoodsGuessLikeAPI } from '@/services/home.js'\nimport { onMounted, ref } from 'vue'\n//获取屏幕边界到安全区域的距离\nconst Info= uni.getSystemInfoSync()\n\nconst guessLikeList = ref([])\n//页码数\nconst pageParams = {\n  page: 1,\n  pageSize: 10,\n}\n//加载完成标志\nconst finish = ref(false)\nconst getHomeGoodsGuessLike = async () => {\n  if (finish.value === true) {\n    // uni.hideTabBar()\n    return uni.showToast({\n      icon: 'none',\n      title: '没有更多数据了~',\n    })\n  }\n  const res = await getHomeGoodsGuessLikeAPI(pageParams)\n  //数据追加\n  guessLikeList.value = guessLikeList.value.concat(...res.result.items)\n  // guessLikeList.value.push(...res.result.items)\n  if(pageParams.page < res.result.pages){\n    pageParams.page++\n  }else{\n    finish.value=true\n  }\n}\nconst resetData = () =>{\n  pageParams.page = 1\n  guessLikeList.value = []\n  finish.value = false\n}\nonMounted(()=>getHomeGoodsGuessLike())\ndefineExpose({\n  resetData,\n  // 将getHomeGoodsGuessLike重命名getMore暴露出父组件\n  getMore:getHomeGoodsGuessLike\n})\n</script>\n\n<template>\n  <!-- 猜你喜欢 -->\n  <view class=\"caption\">\n    <text class=\"text\">猜你喜欢</text>\n  </view>\n  <view class=\"guess\">\n    <navigator\n      class=\"guess-item\"\n      v-for=\"item in guessLikeList\"\n      :key=\"item.id\"\n      :url=\"`/pages/goods/goods?id=${item.id}`\"\n    >\n      <image class=\"image\" mode=\"aspectFill\" :src=\"item.picture\"></image>\n      <view class=\"name\">{{ item.name }}</view>\n      <view class=\"price\">\n        <text class=\"small\">¥</text>\n        <text>{{ item.price }}</text>\n      </view>\n    </navigator>\n  </view>\n  <view class=\"loading-text\"> {{ finish ? '没有更多数据~' : '正在加载...' }}</view>\n</template>\n\n<style lang=\"scss\">\n:host {\n  display: block;\n}\n/* 分类标题 */\n.caption {\n  display: flex;\n  justify-content: center;\n  line-height: 1;\n  padding: 36rpx 0 40rpx;\n  font-size: 32rpx;\n  color: #262626;\n  .text {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 28rpx 0 30rpx;\n\n    &::before,\n    &::after {\n      content: '';\n      width: 20rpx;\n      height: 20rpx;\n      background-image: url(@/static/images/bubble.png);\n      background-size: contain;\n      margin: 0 10rpx;\n    }\n  }\n}\n\n/* 猜你喜欢 */\n.guess {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding: 0 20rpx;\n  .guess-item {\n    width: 345rpx;\n    padding: 24rpx 20rpx 20rpx;\n    margin-bottom: 20rpx;\n    border-radius: 10rpx;\n    overflow: hidden;\n    background-color: #fff;\n  }\n  .image {\n    width: 304rpx;\n    height: 304rpx;\n  }\n  .name {\n    height: 75rpx;\n    margin: 10rpx 0;\n    font-size: 26rpx;\n    color: #262626;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n  }\n  .price {\n    line-height: 1;\n    padding-top: 4rpx;\n    color: #cf4444;\n    font-size: 26rpx;\n  }\n  .small {\n    font-size: 80%;\n  }\n}\n// 加载提示文字\n.loading-text {\n  text-align: center;\n  font-size: 28rpx;\n  color: #666;\n  padding-bottom: v-bind(\"88+Info.statusBarHeight+'px'\");\n}\n</style>\n","import Component from 'D:/code/uni-rabbit/src/components/XtxGuess.vue'\nwx.createComponent(Component)"],"names":["uni","ref","getHomeGoodsGuessLikeAPI","onMounted"],"mappings":";;;;;;;;;;;;AAKA,UAAM,OAAMA,cAAG,MAAC,kBAAmB;AAEnC,UAAM,gBAAgBC,cAAG,IAAC,EAAE;AAE5B,UAAM,aAAa;AAAA,MACjB,MAAM;AAAA,MACN,UAAU;AAAA,IACZ;AAEA,UAAM,SAASA,cAAG,IAAC,KAAK;AACxB,UAAM,wBAAwB,YAAY;AACxC,UAAI,OAAO,UAAU,MAAM;AAEzB,eAAOD,cAAAA,MAAI,UAAU;AAAA,UACnB,MAAM;AAAA,UACN,OAAO;AAAA,QACb,CAAK;AAAA,MACF;AACD,YAAM,MAAM,MAAME,cAAwB,yBAAC,UAAU;AAErD,oBAAc,QAAQ,cAAc,MAAM,OAAO,GAAG,IAAI,OAAO,KAAK;AAEpE,UAAG,WAAW,OAAO,IAAI,OAAO,OAAM;AACpC,mBAAW;AAAA,MACf,OAAO;AACH,eAAO,QAAM;AAAA,MACd;AAAA,IACH;AACA,UAAM,YAAY,MAAK;AACrB,iBAAW,OAAO;AAClB,oBAAc,QAAQ,CAAE;AACxB,aAAO,QAAQ;AAAA,IACjB;AACAC,kBAAAA,UAAU,MAAI,sBAAqB,CAAE;AACrC,WAAa;AAAA,MACX;AAAA;AAAA,MAEA,SAAQ;AAAA,IACV,CAAC;;;;;;;;;;;;;;;;;;;;;AC1CD,GAAG,gBAAgB,SAAS;"}